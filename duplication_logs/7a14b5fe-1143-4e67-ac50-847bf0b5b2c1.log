[2025-07-14 12:14:27,978] INFO alarm_migration: üöÄ Starting Alarm Migration Process
[2025-07-14 12:14:35,341] INFO alarm_migration: ‚úÖ Original alarm fetched.
[2025-07-14 12:14:37,113] INFO alarm_migration: Door already exists in destination with ID: 89684b26-0957-46e3-89ef-944dd42f952f
[2025-07-14 12:14:38,949] INFO alarm_migration: Employee already exists in destination with ID: 3ede3492-844b-4970-93f1-06b8c2bda7fa
[2025-07-14 12:14:41,007] WARNING alarm_migration: ‚ö†Ô∏è No mapped alarm type for 'Unusual Location of Entry'. Using fallback.
[2025-07-14 12:14:41,876] INFO alarm_migration: ‚úÖ Media record fetched.
[2025-07-14 12:14:43,066] INFO alarm_migration: ‚úÖ Media inserted with ID: 224291018
[2025-07-14 12:14:46,576] INFO alarm_migration: ML Output and 1 video tags migrated.
[2025-07-14 12:14:54,697] INFO alarm_migration: Alarm updates migrated. Last update ID: 6e1b23e6-0cdd-4474-8fb7-a945d85a07d0
[2025-07-14 12:14:54,698] INFO alarm_migration: üì• Inserting raw alarm with ID: 4fc9797e-066f-4975-a91a-a68b0c2eba51
[2025-07-14 12:14:55,934] INFO alarm_migration: ‚úÖ Raw alarm inserted successfully with ID: 4fc9797e-066f-4975-a91a-a68b0c2eba51
[2025-07-14 12:14:55,935] INFO alarm_migration: ‚úÖ Migration complete. Connections closed.
[2025-07-14 12:18:14,043] INFO alarm_migration: üöÄ Starting Alarm Migration Process
[2025-07-14 12:18:21,247] INFO alarm_migration: ‚úÖ Original alarm fetched.
[2025-07-14 12:18:23,349] INFO alarm_migration: Door already exists in destination with ID: 89684b26-0957-46e3-89ef-944dd42f952f
[2025-07-14 12:18:24,746] INFO alarm_migration: Employee already exists in destination with ID: 3ede3492-844b-4970-93f1-06b8c2bda7fa
[2025-07-14 12:18:27,505] WARNING alarm_migration: ‚ö†Ô∏è No mapped alarm type for 'Unusual Location of Entry'. Using predefined alarm type ID 'acf15f45-1c8f-426a-8b78-5dbbfef95c36'.
[2025-07-14 12:18:28,294] INFO alarm_migration: ‚úÖ Media record fetched.
[2025-07-14 12:18:30,087] INFO alarm_migration: ‚úÖ Media inserted with ID: 224293991
[2025-07-14 12:18:34,950] INFO alarm_migration: ML Output and 1 video tags migrated.
[2025-07-14 12:18:39,677] INFO alarm_migration: Alarm updates migrated. Last update ID: 1e7e5eaa-84aa-42d2-bc70-8f2664ab1e8c
[2025-07-14 12:18:39,678] INFO alarm_migration: üì• Inserting raw alarm with ID: 19ea9d55-a864-4690-886f-d43f88c038d5
[2025-07-14 12:31:20,586] INFO alarm_migration: üöÄ Starting Alarm Migration Process
[2025-07-14 12:31:33,128] INFO alarm_migration: ‚úÖ Original alarm fetched.
[2025-07-14 12:31:34,333] WARNING alarm_migration: ‚ö†Ô∏è Duplicate alarm detected in destination for source_id=5, tenant_id=demo-sales, partition_key=202103. Skipping migration.
[2025-07-14 12:31:36,666] WARNING alarm_migration: Conflict details: {'raw_alarm': {'id': '4fc9797e-066f-4975-a91a-a68b0c2eba51', 'door_id': '89684b26-0957-46e3-89ef-944dd42f952f', 'source_id': '5', 'alarm_type_id': 'acf15f45-1c8f-426a-8b78-5dbbfef95c36', 'video_path': 'https://haie-videos.s3-us-west-2.amazonaws.com/sample_ag.mp4', 'video_start_timestamp_utc': datetime.datetime(2021, 1, 25, 3, 12, 33), 'video_end_timestamp_utc': datetime.datetime(2021, 1, 25, 3, 12, 55), 'processing_start_timestamp_utc': None, 'processing_end_timestamp_utc': None, 'source_system': 'Lenel OnGuard', 'source_entity_type': 'DOOR', 'source_entity_id': '259e78d5-6ed1-4853-8b50-ca5413d0e2b4', 'raw_source_data': '{"events_event_time_utc": 1611994091.838872}', 'tenant_id': 'demo-sales', 'created_at_utc': datetime.datetime(2021, 3, 22, 22, 17, 42), 'updated_at_utc': datetime.datetime(2023, 4, 18, 18, 10, 54), 'alarm_timestamp_utc': datetime.datetime(2021, 3, 22, 22, 17, 42), 'last_motion_event_timestamp_utc': None, 'alarm_timestamp_local': datetime.datetime(2021, 1, 24, 21, 12, 43), 'user_id': None, 'current_status': 'Pending', 'true_alarm_probability': 65.0, 'alarm_update_id': '6e1b23e6-0cdd-4474-8fb7-a945d85a07d0', 'ml_output_id': 'b475b3f3-faad-4ee2-9896-a9e249e90210', 'resolution_timestamp_utc': None, 'display': 1, 'alarm_state': 'PROCESSED', 'employee_id': '3ede3492-844b-4970-93f1-06b8c2bda7fa', 'video_available': 1, 'hakimo_correlation_id': None, 'sync_version': 0, 'last_state_change_time': datetime.datetime(2021, 10, 11, 22, 28, 10), 'trace_data': None, 'video_corrupt_retries': 0, 'latest_alarm_media_id': 224291018, 'partition_key': 202103}, 'camera': {'id': '259e78d5-6ed1-4853-8b50-ca5413d0e2b4', 'client_camera_id': '2', 'server_url': None, 'camera_name': 'Hakimo Parking Lot Camera', 'camera_timezone': None, 'camera_raw_info': '{"name": "Almeda 2", "y6_fps": null, "rtsp_url": "rtsp://live-int.hakimo.ai:8554/curiostorage_almeda/25", "source_id": 1, "y6_device_id": null, "cam_client_id": "25", "y6_resolution": null, "livestream_url": "https://live.hakimo.ai:8889/curiostorage_almeda/25", "extra_rtsp_args": null, "y6_cam_rtsp_url": null, "playback_enabled": false, "segment_duration": 2, "connection_status": true, "motion_dead_zones": [[[0.0, 0.0], [0.0, 991.717739300882], [355.3037415246095, 841.0486043050564], [692.6174201872135, 697.1258484881484], [1421.214966098438, 602.6765399833025], [1592.1205632874908, 616.1692983411376], [2064.3597134151364, 634.1596428182511], [2560.0, 0.0]]], "rtsp_stream_status": true, "cam_integration_type": "RTSP", "labelling_resolution": null, "use_transport_segments": false, "publish_mediamtx_livestream": false}', 'rtsp_url': 'rtsp://live-int.hakimo.ai:8554/curiostorage_almeda/25', 'fps': None, 'width_pixels': None, 'height_pixels': None, 'integration_type': 'RTSP', 'cam_site_id': None, 'tenant_id': 'demo-sales', 'created_at_utc': datetime.datetime(2025, 7, 6, 19, 17, 30), 'updated_at_utc': datetime.datetime(2025, 7, 6, 20, 6, 54), 'health_status': 'HEALTHY', 'server_id': None, 'latest_image_url': 'https://hakimo-prod.s3-us-west-2.amazonaws.com/curio-storage/2025-7-6/19/cam_images_6/25^^^Almeda 2.jpeg', 'audio_info': None, 'location_id': 1375, 'motion_dead_zones': '[[[0, 0], [0, 991.717739300882], [355.3037415246095, 841.0486043050564], [692.6174201872135, 697.1258484881484], [1421.214966098438, 602.6765399833025], [1592.1205632874908, 616.1692983411376], [2064.3597134151364, 634.1596428182511], [2560, 0]]]', 'labelling_resolution': '[2560, 1936]', 'process_vehicles': 1, 'is_playback_enabled': 0, 'manual_activation_override_window': None, 'is_enabled': 1, 'livestream_url': 'https://live.hakimo.ai:8889/curiostorage_almeda/25', 'user_id': None, 'password_ref': None, 'password_file_path': '/secure/rtsp_cam_password', 'is_motion_detection_enabled': 1, 'rtsp_segment_duration': 2, 'rtsp_extra_tags': None, 'is_automatic_talkdown_enabled': 1, 'vehicle_parking_zones': '[[[89.94859046597281, 0], [0, 68.14347573052058], [0, 857.2454063195453], [592.8429826166389, 746.8529082578682], [1140.7116700002914, 673.2579095500835], [1827.5918153768112, 669.1692985107621], [2560, 689.6123537073689], [2457.2319486386205, 0]]]', 'active_zones': None, 'is_thermal': 0, 'automated_talkdown_start_time_utc': None, 'automated_talkdown_end_time_utc': None, 'rtsp_stream_status': 'HEALTHY', 'vision_host_id': None, 'playback_url': None, 'tenant_name': None, 'camera_group_id': None}, 'location_id': 1375, 'location_alarms': []}
[2025-07-14 12:36:14,072] INFO alarm_migration: üöÄ Starting Alarm Migration Process
[2025-07-14 12:36:31,793] INFO alarm_migration: ‚úÖ Original alarm fetched.
[2025-07-14 12:36:32,389] WARNING alarm_migration: ‚ö†Ô∏è Duplicate alarm detected in destination for source_id=5, tenant_id=demo-sales, partition_key=202103. Skipping migration.
[2025-07-14 12:36:34,560] WARNING alarm_migration: Raw Alarm (important fields):
[2025-07-14 12:36:34,560] WARNING alarm_migration:   id: 4fc9797e-066f-4975-a91a-a68b0c2eba51
[2025-07-14 12:36:34,560] WARNING alarm_migration:   source_id: 5
[2025-07-14 12:36:34,560] WARNING alarm_migration:   partition_key: 202103
[2025-07-14 12:36:34,560] WARNING alarm_migration:   alarm_type_id: acf15f45-1c8f-426a-8b78-5dbbfef95c36
[2025-07-14 12:36:34,560] WARNING alarm_migration:   source_entity_id: 259e78d5-6ed1-4853-8b50-ca5413d0e2b4
[2025-07-14 12:36:34,560] WARNING alarm_migration:   tenant_id: demo-sales
[2025-07-14 12:36:34,561] WARNING alarm_migration:   alarm_timestamp_utc: 2021-03-22 22:17:42
[2025-07-14 12:36:34,561] WARNING alarm_migration:   current_status: Pending
[2025-07-14 12:36:34,561] WARNING alarm_migration: Camera ID: 259e78d5-6ed1-4853-8b50-ca5413d0e2b4, Name: Hakimo Parking Lot Camera, Location ID: 1375
[2025-07-14 12:36:34,561] WARNING alarm_migration: No location alarms found for this location.
